<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="theme-color" content="#080608">
    <title>E-Library ‚Äî Games & Quizzes</title>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;1,400&family=Cinzel+Decorative:wght@400;700&family=Cinzel:wght@400;600&display=swap" rel="stylesheet">
    <style>
        /* ‚ïê‚ïê RESET & TOKENS ‚ïê‚ïê */
        :root{
            --gold:#C9A84C;--gold-light:#E8C97A;--gold-dark:#8B6914;
            --deep:#080608;--card:#130f17;--surface:#0d0b10;
            --border:rgba(201,168,76,.22);--parchment:#f5ead6;
            --muted:rgba(245,234,214,.55);
            --nav-h:58px;
            --safe-bottom:env(safe-area-inset-bottom,0px);
        }
        *,*::before,*::after{box-sizing:border-box;margin:0;padding:0;}
        html{scroll-behavior:smooth;-webkit-text-size-adjust:100%;}
        body{background:var(--deep);color:var(--parchment);font-family:'Cormorant Garamond',serif;overflow-x:hidden;-webkit-tap-highlight-color:transparent;}

        /* noise texture */
        body::before{content:'';position:fixed;inset:0;background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.04'/%3E%3C/svg%3E");pointer-events:none;z-index:9990;opacity:.35;}

        /* ‚ïê‚ïê NAV ‚ïê‚ïê */
        nav{
            position:fixed;top:0;left:0;right:0;height:var(--nav-h);
            z-index:900;padding:0 16px;
            display:flex;align-items:center;justify-content:space-between;
            transition:background .3s;
        }
        nav.scrolled{background:rgba(8,6,8,.96);backdrop-filter:blur(18px);-webkit-backdrop-filter:blur(18px);border-bottom:1px solid var(--border);}
        .nav-brand{font-family:'Cinzel Decorative',serif;font-size:.82rem;color:var(--gold);letter-spacing:2px;text-decoration:none;flex-shrink:0;}
        /* Desktop links ‚Äî hidden on mobile by default */
        .nav-links{display:none;}
        /* Hamburger ‚Äî always visible */
        .hamburger{
            display:flex;flex-direction:column;justify-content:center;gap:5px;
            background:none;border:none;padding:10px 8px;cursor:pointer;
            z-index:1100;-webkit-tap-highlight-color:transparent;
            min-width:44px;min-height:44px;align-items:center;
        }
        .hamburger span{display:block;width:22px;height:2px;background:var(--gold);border-radius:2px;transition:transform .3s,opacity .3s;}
        .hamburger.open span:nth-child(1){transform:translateY(7px) rotate(45deg);}
        .hamburger.open span:nth-child(2){opacity:0;}
        .hamburger.open span:nth-child(3){transform:translateY(-7px) rotate(-45deg);}

        /* ‚îÄ‚îÄ Drawer ‚îÄ‚îÄ */
        .nav-overlay{position:fixed;inset:0;background:rgba(0,0,0,.6);z-index:950;opacity:0;pointer-events:none;transition:opacity .3s;}
        .nav-overlay.show{opacity:1;pointer-events:all;}
        .nav-drawer{
            position:fixed;top:0;right:0;bottom:0;width:min(300px,82vw);
            background:#0d0a12;border-left:1px solid var(--border);
            z-index:960;padding:70px 28px calc(28px + var(--safe-bottom));
            display:flex;flex-direction:column;
            transform:translateX(100%);transition:transform .35s cubic-bezier(.25,.8,.25,1);
            overflow-y:auto;
        }
        .nav-drawer.open{transform:translateX(0);}
        .nav-drawer-link{
            font-family:'Cinzel',serif;font-size:.72rem;letter-spacing:3px;
            color:var(--muted);text-decoration:none;text-transform:uppercase;
            padding:16px 0;border-bottom:1px solid rgba(201,168,76,.07);
            display:flex;align-items:center;gap:14px;transition:color .2s;
            min-height:52px;
        }
        .nav-drawer-link:last-of-type{border-bottom:none;}
        .nav-drawer-link.active,.nav-drawer-link:active{color:var(--gold);}
        .nav-di{font-size:1.15rem;width:26px;flex-shrink:0;}
        .nav-drawer-cta{
            margin-top:auto;padding-top:24px;
            display:block;text-align:center;padding:16px;background:var(--gold);
            color:var(--deep);font-family:'Cinzel',serif;font-size:.68rem;
            letter-spacing:3px;text-decoration:none;text-transform:uppercase;font-weight:700;
        }

        /* ‚ïê‚ïê PAGE HERO ‚ïê‚ïê */
        .page-hero{
            min-height:38vh;display:flex;flex-direction:column;
            align-items:center;justify-content:center;text-align:center;
            padding:calc(var(--nav-h) + 36px) 20px 50px;
            background:radial-gradient(ellipse 90% 60% at 50% 0%,rgba(201,168,76,.13) 0%,transparent 70%);
            position:relative;
        }
        .page-hero::after{content:'';position:absolute;bottom:0;left:0;right:0;height:1px;background:linear-gradient(to right,transparent,var(--gold),transparent);opacity:.25;}
        .eyebrow{font-family:'Cinzel',serif;font-size:.58rem;letter-spacing:5px;color:var(--gold);opacity:.7;margin-bottom:14px;text-transform:uppercase;}
        .page-title{font-family:'Cinzel Decorative',serif;font-size:clamp(1.8rem,8vw,3.2rem);color:var(--gold);line-height:1.1;margin-bottom:12px;text-shadow:0 0 40px rgba(201,168,76,.3);}
        .page-sub{font-style:italic;font-size:clamp(.95rem,3.5vw,1.1rem);color:var(--muted);max-width:380px;line-height:1.65;}

        /* ‚ïê‚ïê GAME TABS ‚Äî mobile pill style ‚ïê‚ïê */
        .tabs-wrap{padding:24px 12px 0;overflow-x:auto;-webkit-overflow-scrolling:touch;scrollbar-width:none;}
        .tabs-wrap::-webkit-scrollbar{display:none;}
        .tabs-bar{
            display:inline-flex;gap:0;min-width:max-content;
            border:1px solid var(--border);border-radius:6px;overflow:hidden;
        }
        .tab-btn{
            font-family:'Cinzel',serif;font-size:.55rem;letter-spacing:2px;
            color:var(--muted);background:transparent;border:none;border-right:1px solid var(--border);
            padding:14px 16px;cursor:pointer;text-transform:uppercase;transition:all .2s;
            white-space:nowrap;min-height:48px;display:flex;align-items:center;gap:6px;
            -webkit-tap-highlight-color:transparent;
        }
        .tab-btn:last-child{border-right:none;}
        .tab-btn.active{color:var(--deep);background:var(--gold);font-weight:700;}
        .tab-btn:active:not(.active){background:rgba(201,168,76,.08);}
        .tab-icon{font-size:.9rem;}
        .tabs-content{margin-top:2px;border-top:1px solid var(--border);}
        .tab-panel{display:none;}
        .tab-panel.active{display:block;animation:fadeUp .3s ease;}
        @keyframes fadeUp{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:none}}

        /* ‚ïê‚ïê SHARED GAME STYLES ‚ïê‚ïê */
        .game-wrap{max-width:640px;margin:0 auto;padding:28px 16px 80px;}
        .game-title{font-family:'Cinzel Decorative',serif;font-size:clamp(1.3rem,5vw,1.8rem);color:var(--gold);margin-bottom:8px;text-align:center;}
        .game-desc{font-style:italic;color:var(--muted);text-align:center;font-size:.95rem;margin-bottom:28px;line-height:1.6;}

        /* Buttons */
        .gold-btn{
            font-family:'Cinzel',serif;font-size:.62rem;letter-spacing:2px;
            color:var(--deep);background:var(--gold);border:none;
            padding:14px 28px;cursor:pointer;text-transform:uppercase;font-weight:700;
            transition:background .2s;min-height:48px;border-radius:2px;
            -webkit-tap-highlight-color:transparent;
        }
        .gold-btn:active{background:var(--gold-light);}
        .ghost-btn{
            font-family:'Cinzel',serif;font-size:.58rem;letter-spacing:2px;
            color:var(--muted);background:none;border:1px solid var(--border);
            padding:13px 22px;cursor:pointer;text-transform:uppercase;
            transition:all .2s;min-height:48px;border-radius:2px;
            -webkit-tap-highlight-color:transparent;
        }
        .ghost-btn:active{border-color:var(--gold);color:var(--gold);}

        /* Scoreboard */
        .score-board{display:flex;justify-content:center;gap:0;margin-bottom:24px;border:1px solid var(--border);border-radius:4px;overflow:hidden;}
        .score-item{flex:1;text-align:center;padding:14px 8px;border-right:1px solid var(--border);}
        .score-item:last-child{border-right:none;}
        .score-val{font-family:'Cinzel Decorative',serif;font-size:1.6rem;color:var(--gold);line-height:1;}
        .score-lbl{font-family:'Cinzel',serif;font-size:.48rem;letter-spacing:2px;color:var(--muted);text-transform:uppercase;margin-top:4px;}

        /* Result card */
        .result-card{text-align:center;padding:36px 20px;background:var(--card);border:1px solid var(--border);position:relative;overflow:hidden;border-radius:2px;}
        .result-card::before{content:'';position:absolute;inset:0;background:radial-gradient(ellipse 80% 80% at 50% 50%,rgba(201,168,76,.06),transparent);pointer-events:none;}
        .r-emoji{font-size:3.5rem;display:block;margin-bottom:14px;}
        .r-title{font-family:'Cinzel Decorative',serif;font-size:clamp(1.3rem,5vw,1.8rem);color:var(--gold);margin-bottom:8px;}
        .r-sub{font-style:italic;color:var(--muted);font-size:.95rem;margin-bottom:22px;line-height:1.6;}
        .r-score{font-family:'Cinzel Decorative',serif;font-size:2.8rem;color:var(--gold);display:block;margin-bottom:4px;}
        .r-max{font-family:'Cinzel',serif;font-size:.55rem;letter-spacing:3px;color:var(--muted);text-transform:uppercase;margin-bottom:24px;display:block;}
        .r-btns{display:flex;gap:10px;justify-content:center;flex-wrap:wrap;}

        /* ‚îÄ‚îÄ 1. TRIVIA BLITZ ‚îÄ‚îÄ */
        .diff-row{display:flex;gap:10px;justify-content:center;flex-wrap:wrap;margin-bottom:24px;}
        .diff-btn{flex:1;min-width:90px;max-width:140px;font-family:'Cinzel',serif;font-size:.62rem;letter-spacing:2px;padding:14px 10px;border:1px solid var(--border);background:transparent;color:var(--muted);text-transform:uppercase;cursor:pointer;border-radius:2px;transition:all .2s;min-height:52px;}
        .diff-btn.sel,.diff-btn:active{border-color:var(--gold);color:var(--gold);background:rgba(201,168,76,.1);}
        .trivia-card{background:var(--card);border:1px solid var(--border);padding:22px 18px;position:relative;border-radius:2px;}
        .trivia-card::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(to right,transparent,var(--gold),transparent);}
        .tq-timer-bar{height:5px;background:rgba(255,255,255,.07);border-radius:3px;margin-bottom:20px;overflow:hidden;}
        .tq-timer-fill{height:100%;background:linear-gradient(to right,var(--gold),#ff8c00);border-radius:3px;transition:width .1s linear;}
        .tq-cat{font-family:'Cinzel',serif;font-size:.52rem;letter-spacing:4px;color:var(--gold);opacity:.6;margin-bottom:6px;text-transform:uppercase;}
        .tq-q{font-size:clamp(1rem,4vw,1.25rem);font-weight:600;line-height:1.5;margin-bottom:20px;color:var(--parchment);}
        .tq-progress{display:flex;gap:5px;margin-bottom:18px;}
        .tq-dot{flex:1;height:5px;background:rgba(255,255,255,.08);border-radius:3px;transition:background .3s;}
        .tq-dot.right{background:#4CAF50;} .tq-dot.wrong{background:#ef5350;} .tq-dot.cur{background:var(--gold);animation:blink 1s infinite;}
        @keyframes blink{0%,100%{opacity:1}50%{opacity:.4}}
        .tq-opts{display:flex;flex-direction:column;gap:10px;}
        .tq-opt{
            width:100%;background:rgba(255,255,255,.04);border:1px solid var(--border);
            color:var(--parchment);font-family:'Cormorant Garamond',serif;font-size:1rem;
            padding:14px 16px;text-align:left;cursor:pointer;border-radius:2px;
            transition:border-color .15s,background .15s;line-height:1.4;min-height:52px;
            -webkit-tap-highlight-color:transparent;
        }
        .tq-opt:active:not(.disabled){border-color:var(--gold);background:rgba(201,168,76,.1);}
        .tq-opt.correct{border-color:#4CAF50;background:rgba(76,175,80,.18);color:#a5d6a7;}
        .tq-opt.wrong{border-color:#ef5350;background:rgba(239,83,80,.14);color:#ef9a9a;}
        .tq-opt.disabled{opacity:.7;pointer-events:none;}
        .tq-fb{font-family:'Cinzel',serif;font-size:.6rem;letter-spacing:2px;text-transform:uppercase;padding:12px 14px;margin-top:14px;border-radius:2px;display:none;animation:fadeUp .3s ease;}
        .tq-fb.show{display:block;}
        .tq-fb.right{background:rgba(76,175,80,.12);border:1px solid #4CAF50;color:#a5d6a7;}
        .tq-fb.wrong{background:rgba(239,83,80,.1);border:1px solid #ef5350;color:#ef9a9a;}
        .tq-fb.time{background:rgba(255,165,0,.1);border:1px solid orange;color:#ffcc80;}

        /* ‚îÄ‚îÄ 2. SPELL SCRAMBLE ‚îÄ‚îÄ */
        .scr-word{
            font-family:'Cinzel Decorative',serif;font-size:clamp(1.6rem,7vw,2.8rem);
            color:var(--gold);text-align:center;letter-spacing:6px;margin:22px 0;
            text-shadow:0 0 20px rgba(201,168,76,.3);animation:glow 2.5s ease-in-out infinite;
            word-break:break-all;
        }
        @keyframes glow{0%,100%{text-shadow:0 0 16px rgba(201,168,76,.3)}50%{text-shadow:0 0 36px rgba(201,168,76,.55),0 0 55px rgba(201,168,76,.18)}}
        .scr-cat{display:block;font-family:'Cinzel',serif;font-size:.5rem;letter-spacing:3px;color:var(--gold);border:1px solid rgba(201,168,76,.3);padding:5px 14px;text-transform:uppercase;width:fit-content;margin:0 auto 8px;border-radius:2px;}
        .scr-hint{font-style:italic;color:var(--muted);text-align:center;font-size:.92rem;margin-bottom:22px;line-height:1.5;}
        .scr-input-wrap{display:flex;flex-direction:column;gap:10px;align-items:center;margin-bottom:14px;}
        .scr-input{
            font-family:'Cinzel Decorative',serif;font-size:1.3rem;color:var(--gold);
            background:transparent;border:none;border-bottom:2px solid var(--border);
            width:100%;max-width:300px;padding:12px 4px;text-align:center;letter-spacing:5px;
            outline:none;text-transform:uppercase;-webkit-appearance:none;border-radius:0;
            transition:border-color .2s;
        }
        .scr-input:focus{border-bottom-color:var(--gold);}
        .scr-input::placeholder{color:rgba(201,168,76,.2);font-size:.9rem;letter-spacing:2px;}
        .scr-cast-btn{width:100%;max-width:300px;}
        .scr-fb{font-family:'Cinzel',serif;font-size:.62rem;letter-spacing:2px;text-align:center;padding:12px;text-transform:uppercase;min-height:44px;display:flex;align-items:center;justify-content:center;border-radius:2px;}
        .scr-fb.ok{color:#a5d6a7;background:rgba(76,175,80,.1);border:1px solid rgba(76,175,80,.3);}
        .scr-fb.no{color:#ef9a9a;background:rgba(239,83,80,.08);border:1px solid rgba(239,83,80,.3);}
        .scr-skip{font-family:'Cinzel',serif;font-size:.55rem;letter-spacing:2px;color:var(--muted);background:none;border:none;cursor:pointer;text-transform:uppercase;text-decoration:underline;text-underline-offset:3px;margin-top:10px;display:block;width:100%;text-align:center;padding:10px;min-height:44px;}
        .scr-skip:active{color:var(--gold);}

        /* ‚îÄ‚îÄ 3. MEMORY MATCH ‚îÄ‚îÄ */
        .mm-grid{
            display:grid;grid-template-columns:repeat(4,1fr);gap:8px;
            margin:0 auto 22px;width:100%;max-width:360px;
        }
        .mc{
            aspect-ratio:1;border:1px solid var(--border);cursor:pointer;
            position:relative;overflow:hidden;border-radius:4px;
            -webkit-tap-highlight-color:transparent;
        }
        .mc-inner{width:100%;height:100%;transform-style:preserve-3d;transition:transform .35s;}
        .mc.flipped .mc-inner,.mc.matched .mc-inner{transform:rotateY(180deg);}
        .mc-back,.mc-front{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;backface-visibility:hidden;-webkit-backface-visibility:hidden;}
        .mc-back{background:linear-gradient(135deg,#1a0e12,#0e0b15);font-size:1.2rem;color:rgba(201,168,76,.5);}
        .mc-front{background:var(--surface);font-size:clamp(1.4rem,5vw,1.9rem);transform:rotateY(180deg);}
        .mc.matched{border-color:#4CAF50;box-shadow:0 0 8px rgba(76,175,80,.25);}
        .mc.flash{animation:mcf .4s ease;}
        @keyframes mcf{0%,100%{border-color:var(--border)}50%{border-color:#ef5350;box-shadow:0 0 10px rgba(239,83,80,.3)}}

        /* ‚îÄ‚îÄ 4. SPELL DUEL ‚îÄ‚îÄ */
        .duel-enemies{display:flex;flex-direction:column;gap:10px;margin-top:20px;}
        .enemy-btn{
            display:flex;align-items:center;gap:16px;
            border:1px solid var(--border);background:var(--card);
            padding:16px 18px;cursor:pointer;text-align:left;border-radius:4px;
            transition:border-color .2s;-webkit-tap-highlight-color:transparent;min-height:64px;
        }
        .enemy-btn:active{border-color:var(--gold);}
        .enemy-btn.boss{border-color:rgba(201,168,76,.35);background:linear-gradient(135deg,#1a0f10,var(--card));}
        .enemy-emoji{font-size:2rem;flex-shrink:0;}
        .enemy-info{flex:1;}
        .enemy-name{font-family:'Cinzel',serif;font-size:.65rem;letter-spacing:2px;color:var(--parchment);text-transform:uppercase;margin-bottom:3px;}
        .enemy-hp-txt{font-size:.85rem;color:var(--muted);font-style:italic;}
        .enemy-badge{font-family:'Cinzel',serif;font-size:.45rem;letter-spacing:2px;padding:3px 8px;border:1px solid var(--gold);color:var(--gold);text-transform:uppercase;border-radius:2px;white-space:nowrap;}
        .duel-arena{background:var(--card);border:1px solid var(--border);padding:20px 16px;border-radius:4px;}
        .duel-arena::before{content:'';display:block;height:3px;background:linear-gradient(to right,transparent,#8B0020,transparent);margin:-20px -16px 20px;}
        .duel-vs-row{display:flex;align-items:center;gap:12px;margin-bottom:24px;}
        .dueler{flex:1;text-align:center;}
        .dueler-name{font-family:'Cinzel',serif;font-size:.52rem;letter-spacing:2px;text-transform:uppercase;margin-bottom:7px;}
        .hp-bar{height:8px;background:rgba(255,255,255,.07);border-radius:4px;overflow:hidden;margin-bottom:5px;}
        .hp-fill{height:100%;border-radius:4px;transition:width .4s ease;}
        .hp-num{font-family:'Cinzel Decorative',serif;font-size:1rem;}
        .vs-badge{font-family:'Cinzel Decorative',serif;font-size:1.2rem;color:var(--gold);opacity:.55;flex-shrink:0;}
        .duel-prompt{text-align:center;margin-bottom:18px;}
        .spell-label{font-family:'Cinzel',serif;font-size:.52rem;letter-spacing:4px;color:var(--gold);opacity:.65;text-transform:uppercase;margin-bottom:6px;}
        .spell-word{font-family:'Cinzel Decorative',serif;font-size:clamp(1.2rem,5vw,2rem);color:var(--gold);text-shadow:0 0 18px rgba(201,168,76,.35);word-break:break-all;}
        .duel-input-row{display:flex;flex-direction:column;gap:10px;align-items:center;margin-bottom:14px;}
        .duel-input{
            font-family:'Cinzel Decorative',serif;font-size:1.1rem;color:var(--gold);
            background:transparent;border:none;border-bottom:2px solid var(--border);
            width:100%;padding:12px 4px;text-align:center;letter-spacing:4px;
            outline:none;text-transform:uppercase;-webkit-appearance:none;border-radius:0;
        }
        .duel-input:focus{border-bottom-color:var(--gold);}
        .cast-btn{width:100%;}
        .duel-log{max-height:120px;overflow-y:auto;padding:12px 14px;background:rgba(0,0,0,.3);border:1px solid rgba(201,168,76,.1);font-style:italic;font-size:.88rem;color:var(--muted);line-height:1.8;border-radius:2px;}
        .duel-log::-webkit-scrollbar{width:3px;} .duel-log::-webkit-scrollbar-thumb{background:var(--gold-dark);}
        .dl{animation:fadeUp .3s ease;} .dl.hit{color:#ffcc80;} .dl.heal{color:#a5d6a7;} .dl.bad{color:#ef9a9a;}

        /* ‚ïê‚ïê FOOTER ‚ïê‚ïê */
        .games-footer{border-top:1px solid var(--border);padding:40px 16px calc(40px + var(--safe-bottom));text-align:center;margin-top:30px;}
        .gf-brand{font-family:'Cinzel Decorative',serif;font-size:1rem;color:var(--gold);margin-bottom:6px;}
        .gf-copy{font-size:.82rem;color:var(--muted);}

        /* ‚ïê‚ïê DESKTOP UPGRADES ‚ïê‚ïê */
        @media(min-width:640px){
            :root{--nav-h:62px;}
            nav{padding:0 5%;}
            .hamburger{display:none;}
            .nav-links{display:flex;align-items:center;gap:22px;}
            .nav-link{font-family:'Cinzel',serif;font-size:.56rem;letter-spacing:3px;color:var(--muted);text-decoration:none;text-transform:uppercase;transition:color .2s;}
            .nav-link:hover,.nav-link.active{color:var(--gold);}
            .nav-cta{font-family:'Cinzel',serif;font-size:.56rem;letter-spacing:2px;color:var(--deep);background:var(--gold);text-decoration:none;text-transform:uppercase;padding:9px 18px;font-weight:700;transition:background .2s;}
            .nav-cta:hover{background:var(--gold-light);}

            .tabs-wrap{padding:32px 24px 0;overflow-x:visible;}
            .tabs-bar{display:flex;min-width:auto;border:none;border-radius:0;border-bottom:1px solid var(--border);}
            .tab-btn{font-size:.6rem;letter-spacing:3px;padding:14px 26px;border:1px solid transparent;border-bottom:1px solid var(--border);border-radius:0;background:none;color:var(--muted);}
            .tab-btn.active{color:var(--gold);border:1px solid var(--border);border-bottom:1px solid var(--deep);background:var(--card);margin-bottom:-1px;}
            .tab-btn:active:not(.active){background:transparent;}

            .game-wrap{padding:48px 24px 80px;}
            .tq-opts{display:grid;grid-template-columns:1fr 1fr;gap:12px;}
            .tq-opt{min-height:auto;}
            .scr-input-wrap{flex-direction:row;}
            .scr-input{width:220px;}
            .scr-cast-btn{width:auto;}
            .duel-enemies{flex-direction:row;flex-wrap:wrap;}
            .enemy-btn{flex:1;min-width:180px;}
            .duel-input-row{flex-direction:row;}
            .duel-input{width:260px;}
            .cast-btn{width:auto;}
            .mm-grid{max-width:440px;gap:12px;}
        }
        @media(min-width:900px){
            .page-title{font-size:3rem;}
        }
    </style>
</head>
<body>

<!-- ‚ïê‚ïê NAV ‚ïê‚ïê -->
<div class="nav-overlay" id="nav-overlay"></div>
<div class="nav-drawer" id="nav-drawer">
    <a class="nav-drawer-link" href="index.html"><span class="nav-di">üìö</span>Library</a>
    <a class="nav-drawer-link" href="index.html#collections"><span class="nav-di">üóÇÔ∏è</span>Collections</a>
    <a class="nav-drawer-link" href="index.html#sorting-hat-section"><span class="nav-di">üé©</span>Sorting Hat</a>
    <a class="nav-drawer-link" href="index.html#trivia-section"><span class="nav-di">‚ö°</span>Daily Trivia</a>
    <a class="nav-drawer-link active" href="games.html"><span class="nav-di">üéÆ</span>Games & Quizzes</a>
    <a class="nav-drawer-cta" href="https://tinyurl.com/ElibraryDarshMembership" target="_blank">‚ú¶ Join Now ‚Äî ‚Çπ99/mo</a>
</div>
<nav id="nav">
    <a class="nav-brand" href="index.html">E¬∑Library</a>
    <div class="nav-links">
        <a class="nav-link" href="index.html">Library</a>
        <a class="nav-link" href="index.html#collections">Collections</a>
        <a class="nav-link active" href="games.html">üéÆ Games</a>
        <a class="nav-cta" href="https://tinyurl.com/ElibraryDarshMembership" target="_blank">Join Now</a>
    </div>
    <button class="hamburger" id="hamburger" aria-label="Open menu" aria-expanded="false">
        <span></span><span></span><span></span>
    </button>
</nav>

<!-- ‚ïê‚ïê HERO ‚ïê‚ïê -->
<header class="page-hero">
    <p class="eyebrow">Wizarding World ¬∑ Fun Zone</p>
    <h1 class="page-title">üéÆ Games & Quizzes</h1>
    <p class="page-sub">Test your wizarding knowledge, scramble spells, match magical symbols and duel dark wizards!</p>
</header>

<!-- ‚ïê‚ïê TABS ‚ïê‚ïê -->
<div class="tabs-wrap">
    <div class="tabs-bar">
        <button class="tab-btn active" id="tab-trivia-blitz" onclick="switchTab('trivia-blitz')"><span class="tab-icon">‚ö°</span>Trivia</button>
        <button class="tab-btn" id="tab-spell-scramble" onclick="switchTab('spell-scramble')"><span class="tab-icon">üî§</span>Scramble</button>
        <button class="tab-btn" id="tab-memory-match" onclick="switchTab('memory-match')"><span class="tab-icon">üÉè</span>Memory</button>
        <button class="tab-btn" id="tab-spell-duel" onclick="switchTab('spell-duel')"><span class="tab-icon">‚öîÔ∏è</span>Duel</button>
    </div>
</div>
<div class="tabs-content">

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê 1. TRIVIA BLITZ ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="tab-panel active" id="panel-trivia-blitz">
<div class="game-wrap">
    <h2 class="game-title">‚ö° Trivia Blitz</h2>
    <p class="game-desc">10 questions with a timer ‚Äî how many can you get right?</p>

    <div id="tb-start">
        <div style="text-align:center;padding:16px 0 24px">
            <div style="font-size:4rem;margin-bottom:16px">üèÜ</div>
            <div style="font-family:'Cinzel',serif;font-size:.58rem;letter-spacing:4px;color:var(--gold);text-transform:uppercase;margin-bottom:18px">Choose difficulty</div>
            <div class="diff-row">
                <button class="diff-btn" onclick="startTrivia('easy')">üü¢<br>Easy</button>
                <button class="diff-btn sel" onclick="startTrivia('medium')">üü°<br>Medium</button>
                <button class="diff-btn" onclick="startTrivia('hard')">üî¥<br>Hard</button>
            </div>
            <div id="tb-best" style="font-family:'Cinzel',serif;font-size:.55rem;letter-spacing:3px;color:var(--muted);text-transform:uppercase"></div>
        </div>
    </div>

    <div id="tb-game" style="display:none">
        <div class="score-board">
            <div class="score-item"><div class="score-val" id="tb-score">0</div><div class="score-lbl">Score</div></div>
            <div class="score-item"><div class="score-val" id="tb-streak">0</div><div class="score-lbl">üî• Streak</div></div>
            <div class="score-item"><div class="score-val" id="tb-qnum">1/10</div><div class="score-lbl">Question</div></div>
        </div>
        <div class="tq-progress" id="tb-progress"></div>
        <div class="trivia-card">
            <div class="tq-timer-bar"><div class="tq-timer-fill" id="tb-timer-fill" style="width:100%"></div></div>
            <div class="tq-cat" id="tb-cat"></div>
            <div class="tq-q" id="tb-q"></div>
            <div class="tq-opts" id="tb-opts"></div>
            <div class="tq-fb" id="tb-fb"></div>
        </div>
    </div>

    <div id="tb-result" style="display:none">
        <div class="result-card">
            <span class="r-emoji" id="tb-r-emoji"></span>
            <div class="r-title" id="tb-r-title"></div>
            <div class="r-sub" id="tb-r-sub"></div>
            <span class="r-score" id="tb-r-score"></span>
            <span class="r-max">out of 100 points</span>
            <div class="r-btns">
                <button class="gold-btn" onclick="startTrivia(tbDiff)">Play Again</button>
                <button class="ghost-btn" onclick="showTBStart()">Change Difficulty</button>
            </div>
        </div>
    </div>
</div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê 2. SPELL SCRAMBLE ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="tab-panel" id="panel-spell-scramble">
<div class="game-wrap">
    <h2 class="game-title">üî§ Spell Scramble</h2>
    <p class="game-desc">A Niffler scrambled the letters! Unscramble the spell or wizarding word.</p>
    <div class="score-board">
        <div class="score-item"><div class="score-val" id="ss-score">0</div><div class="score-lbl">Score</div></div>
        <div class="score-item"><div class="score-val" id="ss-solved">0</div><div class="score-lbl">Solved</div></div>
        <div class="score-item"><div class="score-val" id="ss-lives">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</div><div class="score-lbl">Lives</div></div>
    </div>
    <div id="ss-game">
        <div class="scr-cat" id="ss-cat">Spell</div>
        <div class="scr-word" id="ss-word">LUMOS</div>
        <div class="scr-hint" id="ss-hint"></div>
        <div class="scr-input-wrap">
            <input class="scr-input" id="ss-input" placeholder="TYPE ANSWER" maxlength="22" autocomplete="off" autocorrect="off" autocapitalize="characters" spellcheck="false">
            <button class="gold-btn scr-cast-btn" onclick="checkScramble()">Cast ‚ú®</button>
        </div>
        <div class="scr-fb" id="ss-fb"></div>
        <button class="scr-skip" onclick="skipScramble()">Skip this one ‚Üí</button>
    </div>
    <div id="ss-over" style="display:none">
        <div class="result-card">
            <span class="r-emoji">üíÄ</span>
            <div class="r-title">All Lives Lost!</div>
            <div class="r-sub">The Dark Arts have defeated you this time‚Ä¶</div>
            <span class="r-score" id="ss-final"></span>
            <span class="r-max">words unscrambled</span>
            <button class="gold-btn" onclick="resetScramble()" style="margin-top:16px">Try Again</button>
        </div>
    </div>
</div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê 3. MEMORY MATCH ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="tab-panel" id="panel-memory-match">
<div class="game-wrap">
    <h2 class="game-title">üÉè Memory Match</h2>
    <p class="game-desc">Find all 8 pairs of magical symbols. Don't let the Boggart confuse you!</p>
    <div class="score-board">
        <div class="score-item"><div class="score-val" id="mm-moves">0</div><div class="score-lbl">Moves</div></div>
        <div class="score-item"><div class="score-val" id="mm-pairs">0/8</div><div class="score-lbl">Pairs</div></div>
        <div class="score-item"><div class="score-val" id="mm-time">0:00</div><div class="score-lbl">Time</div></div>
    </div>
    <div class="mm-grid" id="mm-grid"></div>
    <div style="text-align:center"><button class="ghost-btn" onclick="resetMemory()">New Game</button></div>
    <div id="mm-win" style="display:none;margin-top:24px">
        <div class="result-card">
            <span class="r-emoji">üèÜ</span>
            <div class="r-title">Excellent Memory!</div>
            <div class="r-sub" id="mm-win-sub"></div>
            <div class="r-btns"><button class="gold-btn" onclick="resetMemory()">Play Again</button></div>
        </div>
    </div>
</div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê 4. SPELL DUEL ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="tab-panel" id="panel-spell-duel">
<div class="game-wrap">
    <h2 class="game-title">‚öîÔ∏è Spell Duel</h2>
    <p class="game-desc">Type the spell shown to cast it! Wrong spells let the enemy strike back.</p>
    <div id="sd-start">
        <div class="duel-enemies">
            <button class="enemy-btn" onclick="startDuel('Draco Malfoy','üßí',60)">
                <span class="enemy-emoji">üßí</span>
                <div class="enemy-info"><div class="enemy-name">Draco Malfoy</div><div class="enemy-hp-txt">60 HP ¬∑ Easy</div></div>
                <span class="enemy-badge">Starter</span>
            </button>
            <button class="enemy-btn" onclick="startDuel('Bellatrix Lestrange','üßô‚Äç‚ôÄÔ∏è',100)">
                <span class="enemy-emoji">üßô‚Äç‚ôÄÔ∏è</span>
                <div class="enemy-info"><div class="enemy-name">Bellatrix Lestrange</div><div class="enemy-hp-txt">100 HP ¬∑ Medium</div></div>
                <span class="enemy-badge">Hard</span>
            </button>
            <button class="enemy-btn boss" onclick="startDuel('Lord Voldemort','üêç',150)">
                <span class="enemy-emoji">üêç</span>
                <div class="enemy-info"><div class="enemy-name">Lord Voldemort</div><div class="enemy-hp-txt">150 HP ¬∑ Boss</div></div>
                <span class="enemy-badge" style="border-color:#ef5350;color:#ef9a9a">Boss</span>
            </button>
        </div>
    </div>

    <div id="sd-game" style="display:none">
        <div style="font-family:'Cinzel',serif;font-size:.52rem;letter-spacing:3px;color:var(--muted);text-transform:uppercase;margin-bottom:14px;text-align:center" id="sd-badge"></div>
        <div class="duel-arena">
            <div class="duel-vs-row">
                <div class="dueler">
                    <div class="dueler-name" style="color:var(--gold)">You üßô</div>
                    <div class="hp-bar"><div class="hp-fill" id="sd-p-bar" style="width:100%;background:linear-gradient(to right,#4CAF50,#8BC34A)"></div></div>
                    <div class="hp-num" id="sd-p-hp" style="color:#a5d6a7"></div>
                </div>
                <div class="vs-badge">VS</div>
                <div class="dueler">
                    <div class="dueler-name" id="sd-e-name" style="color:#ef9a9a"></div>
                    <div class="hp-bar"><div class="hp-fill" id="sd-e-bar" style="width:100%;background:linear-gradient(to right,#ef5350,#f44336)"></div></div>
                    <div class="hp-num" id="sd-e-hp" style="color:#ef9a9a"></div>
                </div>
            </div>
            <div class="duel-prompt">
                <div class="spell-label">Cast this spell:</div>
                <div class="spell-word" id="sd-spell"></div>
            </div>
            <div class="duel-input-row">
                <input class="duel-input" id="sd-input" placeholder="TYPE SPELL" autocomplete="off" autocorrect="off" autocapitalize="characters" spellcheck="false">
                <button class="gold-btn cast-btn" onclick="castSpell()">‚ö° Cast!</button>
            </div>
            <div class="duel-log" id="sd-log"></div>
        </div>
    </div>

    <div id="sd-result" style="display:none;margin-top:20px">
        <div class="result-card">
            <span class="r-emoji" id="sd-r-emoji"></span>
            <div class="r-title" id="sd-r-title"></div>
            <div class="r-sub" id="sd-r-sub"></div>
            <div class="r-btns" style="margin-top:20px">
                <button class="gold-btn" id="sd-rematch">Rematch!</button>
                <button class="ghost-btn" onclick="document.getElementById('sd-game').style.display='none';document.getElementById('sd-result').style.display='none';document.getElementById('sd-start').style.display='block'">New Enemy</button>
            </div>
        </div>
    </div>
</div>
</div>

</div><!-- /tabs-content -->

<div class="games-footer">
    <div class="gf-brand">E¬∑Library by Darsh</div>
    <p class="gf-copy">¬© 2026 E-Library by Darsh Mulgaonkar ¬∑ Mischief Managed</p>
</div>

<script>
/* ‚ïê‚ïê NAV HAMBURGER ‚ïê‚ïê */
const ham=document.getElementById('hamburger'),drw=document.getElementById('nav-drawer'),ovl=document.getElementById('nav-overlay');
function openMenu(){ham.classList.add('open');drw.classList.add('open');ovl.classList.add('show');document.body.style.overflow='hidden';ham.setAttribute('aria-expanded','true');}
function closeMenu(){ham.classList.remove('open');drw.classList.remove('open');ovl.classList.remove('show');document.body.style.overflow='';ham.setAttribute('aria-expanded','false');}
ham.addEventListener('click',()=>drw.classList.contains('open')?closeMenu():openMenu());
ovl.addEventListener('click',closeMenu);
document.querySelectorAll('.nav-drawer-link').forEach(l=>l.addEventListener('click',closeMenu));
window.addEventListener('scroll',()=>document.getElementById('nav').classList.toggle('scrolled',scrollY>60),{passive:true});

/* ‚ïê‚ïê TABS ‚ïê‚ïê */
const TABS=['trivia-blitz','spell-scramble','memory-match','spell-duel'];
function switchTab(id){
    TABS.forEach(t=>{
        document.getElementById('tab-'+t).classList.toggle('active',t===id);
        document.getElementById('panel-'+t).classList.toggle('active',t===id);
    });
    window.scrollTo({top:0,behavior:'smooth'});
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        1. TRIVIA BLITZ
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
const QB={
easy:[
    {cat:"Spells",q:"What spell makes objects fly?",opts:["Lumos","Wingardium Leviosa","Expelliarmus","Stupefy"],a:1},
    {cat:"Characters",q:"What is the name of Harry's owl?",opts:["Fawkes","Crookshanks","Hedwig","Scabbers"],a:2},
    {cat:"Hogwarts",q:"Which house does Harry Potter belong to?",opts:["Slytherin","Ravenclaw","Hufflepuff","Gryffindor"],a:3},
    {cat:"Spells",q:"What spell produces light from a wand?",opts:["Nox","Lumos","Alohomora","Accio"],a:1},
    {cat:"Characters",q:"Who is Harry Potter's best friend?",opts:["Neville","Draco","Ron","Dean"],a:2},
    {cat:"Creatures",q:"What creature is Hedwig?",opts:["Cat","Toad","Owl","Rat"],a:2},
    {cat:"Spells",q:"What spell unlocks doors?",opts:["Colloportus","Alohomora","Nox","Accio"],a:1},
    {cat:"Characters",q:"What is the name of Hermione's cat?",opts:["Crookshanks","Pigwidgeon","Trevor","Scabbers"],a:0},
    {cat:"Objects",q:"What is Harry's broomstick in his first year?",opts:["Nimbus 2001","Firebolt","Cleansweep","Nimbus 2000"],a:3},
    {cat:"Hogwarts",q:"What is the name of the school of witchcraft?",opts:["Durmstrang","Beauxbatons","Castelobruxo","Hogwarts"],a:3},
],
medium:[
    {cat:"Potions",q:"Which potion grants extraordinary luck?",opts:["Veritaserum","Polyjuice Potion","Felix Felicis","Amortentia"],a:2},
    {cat:"Spells",q:"What is the incantation for the Patronus charm?",opts:["Lumos Patronum","Expecto Patronum","Riddikulus","Protego"],a:1},
    {cat:"Characters",q:"Who is the Half-Blood Prince?",opts:["Tom Riddle","Draco Malfoy","Severus Snape","Sirius Black"],a:2},
    {cat:"Hogwarts",q:"What does Hermione's Patronus look like?",opts:["Doe","Cat","Otter","Hare"],a:2},
    {cat:"Objects",q:"In which Gringotts vault was the Philosopher's Stone kept?",opts:["Vault 999","Vault 687","Vault 317","Vault 713"],a:3},
    {cat:"Spells",q:"What does 'Riddikulus' do?",opts:["Creates fire","Banishes a boggart","Summons objects","Heals wounds"],a:1},
    {cat:"Characters",q:"What is Voldemort's real name?",opts:["Tom Marvolo Riddle","Tom Riddle Jr","Ralph Riddle","Thomas Gaunt"],a:0},
    {cat:"Objects",q:"What is the core of Harry's wand?",opts:["Dragon heartstring","Unicorn hair","Phoenix feather","Veela hair"],a:2},
    {cat:"Creatures",q:"What creature is a Blast-Ended Skrewt?",opts:["Pure-blood","Muggle invention","Magical hybrid","Giant spider"],a:2},
    {cat:"Spells",q:"What spell disarms an opponent?",opts:["Stupefy","Crucio","Expelliarmus","Accio"],a:2},
],
hard:[
    {cat:"Lore",q:"What are the three Deathly Hallows?",opts:["Wand, ring, cloak","Stone, wand, mirror","Wand, stone, cloak","Sword, stone, wand"],a:2},
    {cat:"Characters",q:"Who was Headmaster before Dumbledore?",opts:["Armando Dippet","Everard","Phineas Black","Dilys Derwent"],a:0},
    {cat:"Creatures",q:"What does a Basilisk's indirect gaze do?",opts:["Kills instantly","Blinds permanently","Petrifies","Causes amnesia"],a:2},
    {cat:"Potions",q:"What is the base ingredient of Polyjuice Potion?",opts:["Boomslang skin","Bicorn horn","Fluxweed","Lacewing flies"],a:3},
    {cat:"Characters",q:"Which ghost haunts the girls' bathroom?",opts:["The Bloody Baron","Moaning Myrtle","Nearly Headless Nick","The Grey Lady"],a:1},
    {cat:"Objects",q:"What does the Mirror of Erised show?",opts:["The future","The past","One's deepest desire","One's greatest fear"],a:2},
    {cat:"Spells",q:"What spell does Harry use to defeat Voldemort finally?",opts:["Avada Kedavra","Stupefy","Expelliarmus","Crucio"],a:2},
    {cat:"Lore",q:"What magical village is near Hogwarts?",opts:["Diagon Alley","Knockturn Alley","Hogsmeade","Godric's Hollow"],a:2},
    {cat:"Spells",q:"What does 'Morsmordre' conjure in the sky?",opts:["The Dark Mark","A Patronus","Fiendfyre","Serpensortia"],a:0},
    {cat:"Lore",q:"What language can Harry speak due to Voldemort's Horcrux?",opts:["Mermish","Gobbledegook","Parseltongue","Troll"],a:2},
]};
let tbScore=0,tbStreak=0,tbQIdx=0,tbDiff='medium',tbTimer=null,tbAnswered=false,tbDots=[];
const TB_TIME={easy:20,medium:15,hard:10};
function showTBStart(){document.getElementById('tb-start').style.display='block';document.getElementById('tb-game').style.display='none';document.getElementById('tb-result').style.display='none';const b=localStorage.getItem('tb_best_'+tbDiff);document.getElementById('tb-best').textContent=b?'Best ('+tbDiff+'): '+b+' pts':'';}
function startTrivia(diff){
    tbDiff=diff;tbScore=0;tbStreak=0;tbQIdx=0;tbAnswered=false;tbDots=Array(10).fill('');
    document.getElementById('tb-start').style.display='none';
    document.getElementById('tb-game').style.display='block';
    document.getElementById('tb-result').style.display='none';
    loadTBQ();
}
function renderProg(){document.getElementById('tb-progress').innerHTML=tbDots.map((d,i)=>`<div class="tq-dot ${i<tbQIdx?d:i===tbQIdx?'cur':''}"></div>`).join('');}
function loadTBQ(){
    if(tbQIdx>=10){endTrivia();return;}
    tbAnswered=false;
    const q=QB[tbDiff][tbQIdx];
    document.getElementById('tb-score').textContent=tbScore;
    document.getElementById('tb-streak').textContent=tbStreak;
    document.getElementById('tb-qnum').textContent=(tbQIdx+1)+'/10';
    document.getElementById('tb-cat').textContent=q.cat;
    document.getElementById('tb-q').textContent=q.q;
    document.getElementById('tb-fb').className='tq-fb';
    const sh=[...q.opts.map((t,i)=>({t,i}))].sort(()=>Math.random()-.5);
    document.getElementById('tb-opts').innerHTML=sh.map(o=>`<button class="tq-opt" data-orig="${o.i}" onclick="tbAnswer(${o.i})">${o.t}</button>`).join('');
    renderProg();
    clearInterval(tbTimer);
    const tot=TB_TIME[tbDiff];let el=0;
    document.getElementById('tb-timer-fill').style.width='100%';
    tbTimer=setInterval(()=>{
        el+=0.1;const pct=Math.max(0,100-(el/tot*100));
        const f=document.getElementById('tb-timer-fill');
        if(f){f.style.width=pct+'%';f.style.background=pct>50?'linear-gradient(to right,var(--gold),#ff8c00)':pct>25?'linear-gradient(to right,#ff8c00,#ff4500)':'linear-gradient(to right,#ff4500,#cc0000)';}
        if(el>=tot&&!tbAnswered){tbAnswered=true;clearInterval(tbTimer);document.querySelectorAll('.tq-opt').forEach(b=>{b.classList.add('disabled');if(parseInt(b.dataset.orig)===q.a)b.classList.add('correct');});const fb=document.getElementById('tb-fb');fb.className='tq-fb time show';fb.textContent="‚è∞ Time's up! Answer: "+q.opts[q.a];tbStreak=0;tbDots[tbQIdx]='wrong';setTimeout(()=>{tbQIdx++;loadTBQ();},1800);}
    },100);
}
function tbAnswer(origIdx){
    if(tbAnswered)return;tbAnswered=true;clearInterval(tbTimer);
    const q=QB[tbDiff][tbQIdx];
    document.querySelectorAll('.tq-opt').forEach(b=>{b.classList.add('disabled');const i=parseInt(b.dataset.orig);if(i===q.a)b.classList.add('correct');else if(i===origIdx)b.classList.add('wrong');});
    const ok=origIdx===q.a;
    const fb=document.getElementById('tb-fb');
    if(ok){tbStreak++;const m=tbDiff==='easy'?1:tbDiff==='medium'?1.5:2;const pts=Math.round(10*m*(1+Math.floor(tbStreak/3)*.5));tbScore+=pts;fb.className='tq-fb right show';fb.textContent=`‚ö° Correct! +${pts} pts${tbStreak>1?' ('+tbStreak+'√ó streak)':''}`;tbDots[tbQIdx]='right';}
    else{tbStreak=0;fb.className='tq-fb wrong show';fb.textContent='‚úó Answer: '+q.opts[q.a];tbDots[tbQIdx]='wrong';}
    document.getElementById('tb-score').textContent=tbScore;
    document.getElementById('tb-streak').textContent=tbStreak;
    renderProg();
    setTimeout(()=>{tbQIdx++;loadTBQ();},1600);
}
function endTrivia(){
    clearInterval(tbTimer);
    document.getElementById('tb-game').style.display='none';
    document.getElementById('tb-result').style.display='block';
    let emoji,title,sub;
    if(tbScore>=90){emoji='üèÜ';title='Unbeatable!';sub="Dumbledore himself would be impressed!";}
    else if(tbScore>=60){emoji='‚ö°';title='Outstanding!';sub="You could pass your O.W.L.s with ease!";}
    else if(tbScore>=30){emoji='üé©';title='Acceptable';sub="Keep reading and you'll do better next time!";}
    else{emoji='üìö';title='Troll...';sub="Back to the library for you!";}
    document.getElementById('tb-r-emoji').textContent=emoji;
    document.getElementById('tb-r-title').textContent=title;
    document.getElementById('tb-r-sub').textContent=sub;
    document.getElementById('tb-r-score').textContent=tbScore;
    const prev=parseInt(localStorage.getItem('tb_best_'+tbDiff)||'0');
    if(tbScore>prev)localStorage.setItem('tb_best_'+tbDiff,tbScore);
}
showTBStart();

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        2. SPELL SCRAMBLE
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
const SW=[
    {w:"LUMOS",h:"Lighting charm",c:"Spell"},{w:"PATRONUS",h:"Spirit animal protector",c:"Magic"},
    {w:"HOGWARTS",h:"School of witchcraft and wizardry",c:"Place"},{w:"HERMIONE",h:"The cleverest witch of her age",c:"Character"},
    {w:"QUIDDITCH",h:"Wizarding sport on broomsticks",c:"Sport"},{w:"DUMBLEDORE",h:"Greatest wizard of the age",c:"Character"},
    {w:"EXPELLIARMUS",h:"Disarming spell",c:"Spell"},{w:"HORCRUX",h:"Object containing a piece of soul",c:"Dark Magic"},
    {w:"BASILISK",h:"Deadly serpent in Chamber of Secrets",c:"Creature"},{w:"VOLDEMORT",h:"He-Who-Must-Not-Be-Named",c:"Character"},
    {w:"GRYFFINDOR",h:"House of the brave at heart",c:"House"},{w:"SLYTHERIN",h:"House of the cunning",c:"House"},
    {w:"RAVENCLAW",h:"House of the wise",c:"House"},{w:"HUFFLEPUFF",h:"House of the loyal",c:"House"},
    {w:"NIFFLER",h:"Creature that loves shiny things",c:"Creature"},{w:"PHOENIX",h:"Fawkes is one of these",c:"Creature"},
    {w:"BUTTERBEER",h:"Favourite drink at Three Broomsticks",c:"Food"},{w:"AZKABAN",h:"The wizarding prison",c:"Place"},
    {w:"DIAGON",h:"___ Alley ‚Äî wizarding shopping street",c:"Place"},{w:"ACCIO",h:"Summoning charm",c:"Spell"},
];
let ssScore=0,ssSolved=0,ssLives=3,ssIdx=0,ssOrder=[];
function scramble(w){let a=[...w];for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];}return a.join('')===w?scramble(w):a.join('');}
function resetScramble(){ssScore=0;ssSolved=0;ssLives=3;ssIdx=0;ssOrder=[...SW].sort(()=>Math.random()-.5);document.getElementById('ss-game').style.display='block';document.getElementById('ss-over').style.display='none';loadSW();}
function loadSW(){
    if(ssIdx>=ssOrder.length){ssIdx=0;ssOrder.sort(()=>Math.random()-.5);}
    const w=ssOrder[ssIdx];
    document.getElementById('ss-cat').textContent=w.c;
    document.getElementById('ss-word').textContent=scramble(w.w);
    document.getElementById('ss-hint').textContent='Hint: '+w.h;
    document.getElementById('ss-input').value='';
    document.getElementById('ss-fb').textContent='';
    document.getElementById('ss-fb').className='scr-fb';
    document.getElementById('ss-score').textContent=ssScore;
    document.getElementById('ss-solved').textContent=ssSolved;
    document.getElementById('ss-lives').textContent='‚ù§Ô∏è'.repeat(Math.max(0,ssLives))+'üñ§'.repeat(Math.max(0,3-ssLives));
}
function checkScramble(){
    const v=document.getElementById('ss-input').value.trim().toUpperCase().replace(/\s+/g,'');
    if(!v)return;
    const correct=ssOrder[ssIdx].w;
    const fb=document.getElementById('ss-fb');
    if(v===correct){
        fb.textContent='‚ú® Correct! "'+correct+'"';fb.className='scr-fb ok';
        ssScore+=10;ssSolved++;
        setTimeout(()=>{ssIdx++;loadSW();},1000);
    }else{
        fb.textContent='‚úó Not quite, try again!';fb.className='scr-fb no';
        ssLives--;
        document.getElementById('ss-lives').textContent='‚ù§Ô∏è'.repeat(Math.max(0,ssLives))+'üñ§'.repeat(Math.max(0,3-ssLives));
        if(ssLives<=0){document.getElementById('ss-game').style.display='none';document.getElementById('ss-over').style.display='block';document.getElementById('ss-final').textContent=ssSolved;}
    }
}
function skipScramble(){if(ssLives>1)ssLives--;ssIdx++;loadSW();}
document.getElementById('ss-input').addEventListener('keydown',e=>{if(e.key==='Enter')checkScramble();});
resetScramble();

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        3. MEMORY MATCH
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
const EMJS=['üßô','üêç','ü¶Å','ü¶Ö','ü¶°','üîÆ','‚ö°','üß™','ü™Ñ','üêâ','ü¶â','üèÜ'];
let mmFlipped=[],mmMatched=0,mmMoves=0,mmCards=[],mmLocked=false,mmTI=null,mmSec=0;
function resetMemory(){
    clearInterval(mmTI);mmSec=0;mmMoves=0;mmMatched=0;mmFlipped=[];mmLocked=false;
    document.getElementById('mm-win').style.display='none';
    ['mm-moves','mm-pairs','mm-time'].forEach((id,i)=>document.getElementById(id).textContent=['0','0/8','0:00'][i]);
    const ch=[...EMJS].sort(()=>Math.random()-.5).slice(0,8);
    mmCards=[...ch,...ch].sort(()=>Math.random()-.5);
    document.getElementById('mm-grid').innerHTML=mmCards.map((e,i)=>`<div class="mc" id="mc${i}" onclick="flipCard(${i})"><div class="mc-inner"><div class="mc-back">‚ú¶</div><div class="mc-front">${e}</div></div></div>`).join('');
    mmTI=setInterval(()=>{mmSec++;const m=Math.floor(mmSec/60),s=mmSec%60;document.getElementById('mm-time').textContent=m+':'+(s<10?'0':'')+s;},1000);
}
function flipCard(idx){
    if(mmLocked||mmFlipped.includes(idx))return;
    const c=document.getElementById('mc'+idx);
    if(c.classList.contains('matched')||c.classList.contains('flipped'))return;
    c.classList.add('flipped');mmFlipped.push(idx);
    if(mmFlipped.length===2){
        mmMoves++;document.getElementById('mm-moves').textContent=mmMoves;mmLocked=true;
        const[a,b]=mmFlipped;
        if(mmCards[a]===mmCards[b]){
            setTimeout(()=>{[a,b].forEach(i=>document.getElementById('mc'+i).classList.add('matched'));mmMatched++;document.getElementById('mm-pairs').textContent=mmMatched+'/8';mmFlipped=[];mmLocked=false;if(mmMatched===8){clearInterval(mmTI);setTimeout(showMMWin,500);}},400);
        }else{
            setTimeout(()=>{
                [a,b].forEach(i=>{const el=document.getElementById('mc'+i);el.classList.add('flash');});
                setTimeout(()=>{[a,b].forEach(i=>{const el=document.getElementById('mc'+i);el.classList.remove('flipped','flash');});mmFlipped=[];mmLocked=false;},250);
            },700);
        }
    }
}
function showMMWin(){
    document.getElementById('mm-win').style.display='block';
    const m=Math.floor(mmSec/60),s=mmSec%60;
    document.getElementById('mm-win-sub').textContent=`Completed in ${m}:${s<10?'0':''}${s} with ${mmMoves} moves! ${mmMoves<=16?'üåü Perfect!':mmMoves<=24?'Well done!':'Keep practising!'}`;
}
resetMemory();

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        4. SPELL DUEL
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
const DS=[
    {s:"EXPELLIARMUS",d:20,desc:"disarmed them!"},{s:"STUPEFY",d:15,desc:"stunned the enemy!"},
    {s:"PROTEGO",d:0,heal:15,desc:"shielded yourself!"},{s:"INCENDIO",d:25,desc:"set them ablaze!"},
    {s:"WINGARDIUM LEVIOSA",d:10,desc:"lifted them up!"},{s:"RIDDIKULUS",d:18,desc:"made a fool of them!"},
    {s:"EXPECTO PATRONUM",d:30,desc:"summoned your Patronus!"},{s:"ALOHOMORA",d:12,desc:"opened their defences!"},
    {s:"ACCIO",d:8,heal:10,desc:"summoned your strength!"},{s:"LUMOS MAXIMA",d:22,desc:"blinded the enemy!"},
];
const EA=["Avada Kedavra deflected!","Crucio flies past your ear!","A dark curse grazes you!","Dark magic swirls!","Sectumsempra lashes out!"];
let sdPHP=100,sdEHP=100,sdEMax=100,sdSQ=[],sdCur=null,sdEName='';
function startDuel(name,emoji,hp){
    sdPHP=100;sdEHP=hp;sdEMax=hp;sdEName=name;
    document.getElementById('sd-start').style.display='none';
    document.getElementById('sd-game').style.display='block';
    document.getElementById('sd-result').style.display='none';
    document.getElementById('sd-badge').textContent='‚öîÔ∏è Duelling: '+emoji+' '+name;
    document.getElementById('sd-e-name').textContent=emoji+' '+name;
    document.getElementById('sd-log').innerHTML='<div class="dl">The duel begins! Defeat '+name+'!</div>';
    document.getElementById('sd-rematch').onclick=()=>startDuel(name,emoji,hp);
    updateBars();nextDS();
}
function nextDS(){sdSQ=[...DS].sort(()=>Math.random()-.5);pickDS();}
function pickDS(){if(!sdSQ.length)nextDS();sdCur=sdSQ.pop();document.getElementById('sd-spell').textContent=sdCur.s;document.getElementById('sd-input').value='';}
function updateBars(){
    document.getElementById('sd-p-hp').textContent=sdPHP+' HP';
    document.getElementById('sd-e-hp').textContent=sdEHP+' HP';
    document.getElementById('sd-p-bar').style.width=Math.max(0,sdPHP)+'%';
    document.getElementById('sd-e-bar').style.width=Math.max(0,(sdEHP/sdEMax)*100)+'%';
}
function castSpell(){
    const v=document.getElementById('sd-input').value.trim().toUpperCase();
    if(!v||!sdCur)return;
    const log=document.getElementById('sd-log');
    function addLog(txt,cls){const d=document.createElement('div');d.className='dl'+(cls?' '+cls:'');d.textContent=txt;log.appendChild(d);log.scrollTop=log.scrollHeight;}
    if(v===sdCur.s){
        if(sdCur.heal){sdPHP=Math.min(100,sdPHP+sdCur.heal);addLog('‚úÖ '+sdCur.s+' ‚Äî '+sdCur.desc,'heal');}
        else{sdEHP-=sdCur.d;addLog('‚ö° '+sdCur.s+' ‚Äî '+sdCur.desc,'hit');}
        updateBars();if(sdEHP<=0){endDuel(true);return;}pickDS();
    }else{
        const dmg=Math.floor(Math.random()*15)+8;sdPHP-=dmg;
        addLog('‚úó Wrong! '+EA[Math.floor(Math.random()*EA.length)]+' (‚àí'+dmg+' HP)','bad');
        updateBars();if(sdPHP<=0){endDuel(false);return;}
        document.getElementById('sd-input').value='';
    }
}
function endDuel(won){
    document.getElementById('sd-game').style.display='none';
    document.getElementById('sd-result').style.display='block';
    document.getElementById('sd-r-emoji').textContent=won?'üèÜ':'üíÄ';
    document.getElementById('sd-r-title').textContent=won?'Victory!':'Defeated‚Ä¶';
    document.getElementById('sd-r-sub').textContent=won?`You defeated ${sdEName}! The wizarding world is safe!`:`${sdEName} has defeated you. Train harder!`;
}
document.getElementById('sd-input').addEventListener('keydown',e=>{if(e.key==='Enter')castSpell();});
</script>
</body>
</html>
